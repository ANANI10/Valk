<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <link rel="stylesheet" href="produit.component.css">
    
<title>Ajouter Produit</title>
</head>
    <body>

        <mat-card>
            <mat-card-content class="produit-container" style="font-family: 'Times New Roman', Times, serif" >
                <span class="produit">Produit</span>
                <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#exampleModal">Ajouter un produit</button>

                <!-- Modale pour afficher le formulaire -->
                <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h1 class="modal-title fs-5" id="exampleModalLabel" style="font-family: 'Times New Roman', Times, serif;">Formulaire d'Ajout de produit</h1>
                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                            </div>
                            <div class="modal-body">
                                <!-- Formulaire d'Ajout de categorie -->
                                <form class="row g-3" [formGroup]="produitForm" (ngSubmit)="onAddProduit()">
                                    <div class="col-mb-4">
                                        <label for="nom" class="form-label">Nom du Produit : </label>
                                        <input type="text" class="form-control" id="nom" placeholder="Entrez le nom du produit" formControlName="nom">
                                        <div *ngIf="produitForm.get('nom')?.invalid && (produitForm.get('nom')?.dirty || produitForm.get('nom')?.touched)"
                                            class="alert alert-danger">
                                            <div *ngIf="produitForm.get('nomCategorie')?.errors?.['required']">
                                                Nom Produit est requis.
                                            </div>
                                        </div>
                                    </div>
                                        
                                        <div class="mb-3">
                                            <label for="description" class="col-form-label">Description:</label>
                                            <textarea class="form-control" id="description" placeholder="Entrez la description" formControlName="description"></textarea>
                                            <div *ngIf="produitForm.get('description')?.invalid && (produitForm.get('description')?.dirty || produitForm.get('description')?.touched)"
                                                class="alert alert-danger">
                                                <div *ngIf="produitForm.get('description')?.errors?.['required']">
                                                    Description est requis.
                                                </div>
                                            </div>
                                        </div>
                                        
                                    <div class="col-mb-4">
                                        <label for="quantiteStock" class="form-label"> Quantité en stock : </label>
                                        <input type="number" class="form-control" id="quantiteStock" placeholder="Entrez la quantiteStock du produit" formControlName="quantiteStock">
                                        <div *ngIf="produitForm.get('quantiteStock')?.invalid && (produitForm.get('quantiteStock')?.dirty || produitForm.get('quantiteStock')?.touched)"
                                            class="alert alert-danger">
                                            <div *ngIf="produitForm.get('quantiteStock')?.errors?.['required']">
                                                Quantité du Produit est requis.
                                            </div>
                                        </div>
                                    </div>

                                    <div class="col-mb-4">
                                        <label for="prix" class="form-label"> Prix : </label>
                                        <input type="number" class="form-control" id="prix" placeholder="Entrez le prix du produit" formControlName="prix">
                                        <div *ngIf="produitForm.get('prix')?.invalid && (produitForm.get('prix')?.dirty || produitForm.get('prix')?.touched)"
                                            class="alert alert-danger">
                                            <div *ngIf="produitForm.get('prix')?.errors?.['required']">
                                                Prix du Produit est requis.
                                            </div>
                                        </div>
                                    </div>

                                    <div class="col-mb-4">
                                        <label for="dateStock" class="form-label"> Date Stock : </label>
                                        <input type="date" class="form-control" id="dateStock" placeholder="Entrez le dateStock du produit" formControlName="dateStock">
                                        <div *ngIf="produitForm.get('dateStock')?.invalid && (produitForm.get('dateStock')?.dirty || produitForm.get('dateStock')?.touched)"
                                            class="alert alert-danger">
                                            <div *ngIf="produitForm.get('dateStock')?.errors?.['required']">
                                                Date Stock Produit est requis.
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-mb-4">
                                        <select class="form-select form-select-sm" formControlName="categorieId" aria-label="Small select example" placeholder="Selectionner la catégorie">
                                            <option selected *ngFor="let categorie of categories" [value]="categorie.categorieId">
                                                {{categorie.nomCategorie}}
                                            </option>
                                        </select>
                                    </div>
                                    <div class="col-12">
                                        <button type="submit" class="btn btn-primary">Enregistrer</button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
                <div *ngIf="successMessage" class="alert alert-success mt-3">
                    {{ successMessage }}
                </div>

            </mat-card-content>
        </mat-card>
        
            <br>

            

            <nav id="navbar-example2" class="navbar bg-body-tertiary px-3 mb-3">
                <div style="font-family: 'Times New Roman', Times, serif;">
                    Liste Des Produits
                </div> 
            </nav>
        
        
            <div class="search-bar">
                <input [(ngModel)]="searchValue" placeholder="Rechercher un produit" style="font-family: 'Times New Roman', Times, serif;" />
                <i class="fas fa-search"></i>
            </div>
        
            <table class="table">
                <thead style="font-family: 'Times New Roman', Times, serif;">
                    <tr>
                        <th scope="col" >Id</th>
                        <th scope="col" >Nom Produit</th>
                        <th scope="col" >Description</th>
                        <th scope="col" >QuantiteStock</th>
                        <th scope="col">Prix</th>
                        <th scope="col">DateStock</th>
                        <th scope="col">Actions</th>
                    </tr>
                </thead>
                <tbody class="table-group-divider" style="font-family: 'Times New Roman', Times, serif;">
                    <tr *ngFor="let produit of filteredProduit">
                        <td> {{ produit.id }}</td>
                        <td> {{ produit.nom }} </td>
                        <td> {{ produit.description }} </td>
                        <td> {{ produit.quantiteStock }} </td>
                        <td> {{ produit.prix }} Fcfa</td>
                        <td> {{ produit.dateStock }} </td>
                        <td>
                            <div style="display: flex; gap: 20px;">
                                <button class="icon-button" (click)="onDeleteProduitConfirmation(produit.id)"><i class="fas fa-trash-alt" style="color: red;"></i></button>
                                  <a routerLink="/dashboard/updateProd"> <i class="fas fa-edit" style="color: blue;"></i> </a>
                            </div>
                        </td>
        
                    </tr>
                </tbody>
            </table>

        
            <div class="container">
                <router-outlet></router-outlet>
            </div>

            <!-- Dans votre fichier HTML -->
    <!-- Nouveaux scripts Bootstrap 5 -->

        <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.min.js" integrity="sha384-BBtl+eGJRgqQAUMxJ7pMwbEyER4l1g+O15P+16Ep7Q9Q+zqX6gSbd85u4mG4QzX+" crossorigin="anonymous"></script>
        
        
    </body>

</html>
